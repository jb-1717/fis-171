<script>
  // **IMPORTANTE: Pega aquí la URL de la aplicación web que obtuviste en el Paso 2.**
  const API_URL = 'https://script.google.com/macros/s/AKfycbzwTXXNHfuF7nzCRmVG1kF8sJKR9PUw2mQQzTrkieLkJgrRSjYvmnmVgTbX_zyR1-HRJA/exec';

  function getNotes() {
    var studentID = document.getElementById('studentID').value;
    var resultDiv = document.getElementById('result');
    resultDiv.innerHTML = '<div class="loading">Buscando notas...</div>';
    
    // Llama a la API con el ID del estudiante como parámetro de URL
    fetch(`${API_URL}?studentID=${studentID}`)
      .then(response => response.json()) // Convierte la respuesta a formato JSON
      .then(data => showNotes(data))    // Llama a showNotes con los datos
      .catch(error => {
        console.error('Error:', error);
        resultDiv.innerHTML = '<div class="error">Hubo un error al conectar con el servidor.</div>';
      });
  }
  
  function showNotes(data) {
    var resultDiv = document.getElementById('result');
    resultDiv.innerHTML = '';
    
    if (data.error) {
      resultDiv.innerHTML = '<div class="error">' + data.error + '</div>';
    } else {
      var htmlContent = '';
      
      // Define el orden de las columnas que quieres mostrar (mismo que el anterior)
      var orderedKeys = [
        'Nombre Completo', 
        'Matemáticas', 
        'Ciencias', 
        'Historia', 
        'Promedio Final'
      ];

      htmlContent += '<h3>Notas para ' + data['Nombre Completo'] + ':</h3>';

      for (var i = 0; i < orderedKeys.length; i++) {
        var key = orderedKeys[i];
        if (data.hasOwnProperty(key) && key.trim().toLowerCase() !== 'id estudiante') {
          htmlContent += '<div class="note-item"><span class="note-label">' + key + ':</span> ' + data[key] + '</div>';
        }
      }

      resultDiv.innerHTML = htmlContent;
    }
  }
</script>
